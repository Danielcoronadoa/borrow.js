/* Borrow.js Minified
 * GNU LGPL v.2.1 License
 * https://github.com/nasif-co/borrow.js */
let borrower={needs:{mouse:!1,url:!1,time:!1,deviceAcceleration:!1,deviceRotation:!1,keyboard:!1,scroll:!1,forms:!1,language:!1,network:!1,geolocation:!1,load:!1,pointerPressure:!1,counter:!1,random:!1},checkWhatToBorrow:function(){let o=document.styleSheets,e=[];const t=[...o].map((o=>{try{return[...o.cssRules].map((o=>o.cssText)).join("")}catch(t){e.push(o.href)}})).filter(Boolean).join("\n");e.length>0&&(console.groupCollapsed("Some stylesheets were ignored. Expand to see the complete list."),e.forEach((o=>{console.log(o)})),console.groupEnd()),(t.includes("--mouse-")||t.includes("[data-mouse-state"))&&this.borrowMouse(),t.includes("[data-hash")&&this.borrowURL(),(t.includes("--acceleration")||t.includes("[data-acceleration")||t.includes("-rotation-"))&&(isSecureContext?((t.includes("--acceleration")||t.includes("[data-acceleration"))&&this.borrowAcceleration(),t.includes("-rotation-")&&this.borrowRotation()):console.warn("Current connection is not on a Secure Context. This means the following features will not be available: Rotation and Acceleration.\n\nPlease make sure that your domain name does not include special characters (like '#*%'), start or end with a hyphen ('-') or exceed 255 characters (as per RFC1035 Section 2.3.4). Breaking one or more of these rules may be causing your connection to be insecure.")),(t.includes("[data-active-keys")||t.includes("[data-toggled-keys"))&&this.borrowKeyboard(),(t.includes("--scroll-depth-")||t.includes("[data-scroll-depth"))&&this.borrowScroll(),t.includes("[data-language")&&this.borrowLanguage(),t.includes("[data-network-status")&&this.borrowNetwork(),t.includes("[data-load-state")&&this.borrowLoadEvents()},borrowMouse:function(){if(!window.matchMedia("(pointer: fine)").matches)return;borrower.globals.mousePos={x:0,y:0},document.body.style.setProperty("--mouse-x",borrower.globals.mousePos.x),document.body.style.setProperty("--mouse-y",borrower.globals.mousePos.y);const o=borrower.utils.throttle((function(o){borrower.globals.mousePos.x=parseFloat((o.clientX/window.innerWidth).toFixed(4)),borrower.globals.mousePos.y=parseFloat((o.clientY/window.innerHeight).toFixed(4)),document.body.style.setProperty("--mouse-x",borrower.globals.mousePos.x),document.body.style.setProperty("--mouse-y",borrower.globals.mousePos.y)}),25);window.addEventListener("mousemove",o),window.addEventListener("mousedown",(function(o){0==o.button&&(document.body.hasAttribute("data-mouse-state")&&document.body.getAttribute("data-mouse-state").includes("mouse-toggled")?document.body.removeAttribute("data-mouse-state"):document.body.setAttribute("data-mouse-state","mouse-toggled"))}))},borrowURL:function(){borrower.globals.urlHash=location.hash.substring(1),document.body.setAttribute("data-hash",borrower.globals.urlHash),window.addEventListener("hashchange",(function(){borrower.globals.urlHash=location.hash.substring(1),document.body.setAttribute("data-hash",borrower.globals.urlHash)}))},borrowTime:function(){},borrowAcceleration:function(){if(window.matchMedia("(pointer: fine)").matches)return;const o=borrower.utils.throttle((function(o){borrower.globals.deviceAcceleration={x:borrower.utils.constrain(o.acceleration.x/100,-1,1),y:borrower.utils.constrain(o.acceleration.y/100,-1,1),z:borrower.utils.constrain(o.acceleration.z/100,-1,1)},document.body.style.setProperty("--acceleration-x",borrower.globals.deviceAcceleration.x),document.body.style.setProperty("--acceleration-y",borrower.globals.deviceAcceleration.y),document.body.style.setProperty("--acceleration-z",borrower.globals.deviceAcceleration.z),Object.keys(borrower.globals.deviceAcceleration).forEach((o=>{let e="low";Math.abs(borrower.globals.deviceAcceleration[o])<.2?e="low":Math.abs(borrower.globals.deviceAcceleration[o])<.4?e="low-mid":Math.abs(borrower.globals.deviceAcceleration[o])<.6?e="mid":Math.abs(borrower.globals.deviceAcceleration[o])<.8?e="mid-high":Math.abs(borrower.globals.deviceAcceleration[o])<=1&&(e="high");let t="positive";borrower.globals.deviceAcceleration[o]<0&&(t="negative"),document.body.setAttribute("data-acceleration-"+o,t+" "+e)}))}),25);window.addEventListener("devicemotion",o)},borrowRotation:function(){if(window.matchMedia("(pointer: fine)").matches)return;borrower.globals.deviceRotation={normal:{x:0,y:0,z:0},continuous:{x:0,y:0,z:0}};let o={x:0,y:0,z:0};function e(o,e,t,r,n){let a=n/2;return Math.abs(o-e)<a?o>e?t+=Math.abs(o-e):o<e&&(t-=Math.abs(o-e)):e<o?(t-=e-r,t-=n-o):(t+=o-r,t+=n-e),t}const t=borrower.utils.throttle((function(t){o=borrower.globals.deviceRotation.normal,borrower.globals.deviceRotation.normal={x:t.beta,y:t.gamma,z:t.alpha},borrower.globals.deviceRotation.continuous={x:e(borrower.globals.deviceRotation.normal.x,o.x,borrower.globals.deviceRotation.continuous.x,-180,180),y:e(borrower.globals.deviceRotation.normal.y,o.y,borrower.globals.deviceRotation.continuous.y,-90,90),z:e(borrower.globals.deviceRotation.normal.z,o.z,borrower.globals.deviceRotation.continuous.z,0,360)},document.body.style.setProperty("--cont-rotation-x",(borrower.globals.deviceRotation.continuous.x/360).toFixed(4)),document.body.style.setProperty("--rotation-x",(borrower.globals.deviceRotation.normal.x/360).toFixed(4)),document.body.style.setProperty("--cont-rotation-y",(borrower.globals.deviceRotation.continuous.y/360).toFixed(4)),document.body.style.setProperty("--rotation-y",(borrower.globals.deviceRotation.normal.y/360).toFixed(4)),document.body.style.setProperty("--cont-rotation-z",(borrower.globals.deviceRotation.continuous.z/360).toFixed(4)),document.body.style.setProperty("--rotation-z",(borrower.globals.deviceRotation.normal.z/360).toFixed(4))}),25);window.addEventListener("deviceorientation",t)},borrowKeyboard:function(){borrower.globals.pressedKeys=[],borrower.globals.toggledKeys=[];let o=0;window.addEventListener("keydown",(function(e){e.isComposing||("Space"==e.code&&e.target==document.body&&e.preventDefault(),e.repeat?(clearTimeout(o),o=setTimeout((function(){-1!=borrower.globals.pressedKeys.indexOf(e.code)&&(borrower.globals.pressedKeys.splice(borrower.globals.pressedKeys.indexOf(e.code),1),document.body.setAttribute("data-active-keys",borrower.globals.pressedKeys.join(" ")))}),500)):-1==["CapsLock","Tab"].indexOf(e.code)&&-1==borrower.globals.pressedKeys.indexOf(e.code)&&(borrower.globals.pressedKeys.push(e.code),document.body.setAttribute("data-active-keys",borrower.globals.pressedKeys.join(" "))))})),window.addEventListener("keyup",(function(o){o.isComposing||(-1!=borrower.globals.pressedKeys.indexOf(o.code)&&(borrower.globals.pressedKeys.splice(borrower.globals.pressedKeys.indexOf(o.code),1),document.body.setAttribute("data-active-keys",borrower.globals.pressedKeys.join(" "))),-1==["CapsLock","Tab"].indexOf(o.code)&&(-1==borrower.globals.toggledKeys.indexOf(o.code)?borrower.globals.toggledKeys.push(o.code):borrower.globals.toggledKeys.splice(borrower.globals.toggledKeys.indexOf(o.code),1),document.body.setAttribute("data-toggled-keys",borrower.globals.toggledKeys.join(" "))))}))},borrowScroll:function(){borrower.globals.scrollDepth={y:0,x:0};const o=borrower.utils.throttle(e,25);function e(){window.innerHeight<document.body.scrollHeight?borrower.globals.scrollDepth.y=window.scrollY/(document.body.scrollHeight-window.innerHeight):borrower.globals.scrollDepth.y=0,window.innerWidth<document.body.scrollWidth?borrower.globals.scrollDepth.x=window.scrollX/(document.body.scrollWidth-window.innerWidth):borrower.globals.scrollDepth.x=0,document.body.style.setProperty("--scroll-depth-y",borrower.globals.scrollDepth.y.toFixed(4)),document.body.style.setProperty("--scroll-depth-x",borrower.globals.scrollDepth.x.toFixed(4));const o=function(){const o=[0,10,20,30,40,50,60,70,80,90,100],e=Math.trunc(10*borrower.globals.scrollDepth.y),t=Math.trunc(10*borrower.globals.scrollDepth.x),r={y:o.slice(0,e+1).join(" "),x:o.slice(0,t+1).join(" ")};return r}();document.body.setAttribute("data-scroll-depth-x",o.x),document.body.setAttribute("data-scroll-depth-y",o.y)}window.addEventListener("scroll",o),borrower.utils.runOnResize(e)},borrowForms:function(){},borrowLanguage:function(){borrower.globals.language=navigator.language,document.body.setAttribute("data-language",borrower.globals.language),window.addEventListener("languagechange",(function(){borrower.globals.language=navigator.language,document.body.setAttribute("data-language",borrower.globals.language)}))},borrowNetwork:function(){borrower.globals.network="online",navigator.onLine||(borrower.globals.network="offline"),document.body.setAttribute("data-network-status",borrower.globals.network),window.addEventListener("online",(function(){borrower.globals.network="online",document.body.setAttribute("data-network-status",borrower.globals.network)})),window.addEventListener("offline",(function(){borrower.globals.network="offline",document.body.setAttribute("data-network-status",borrower.globals.network)}))},borrowGeolocation:function(){},borrowLoadEvents:function(){const o=document.querySelectorAll('img[src]:not([src=""])');null!=o&&Array.from(o).forEach((o=>{o.complete?0==o.naturalHeight?o.setAttribute("data-load-state","failed"):o.setAttribute("data-load-state","complete"):(o.setAttribute("data-load-state","loading"),o.addEventListener("load",(function(o){0==o.currentTarget.naturalHeight?o.currentTarget.setAttribute("data-load-state","failed"):o.currentTarget.setAttribute("data-load-state","complete")})))}));const e=document.querySelectorAll('iframe[src]:not([src=""])');null!=e&&Array.from(e).forEach((o=>{"complete"==o.readyState?o.setAttribute("data-load-state","complete"):(o.setAttribute("data-load-state","loading"),o.addEventListener("load",(function(o){o.currentTarget.setAttribute("data-load-state","complete")})))})),"complete"==document.readyState?document.body.setAttribute("data-load-state","complete"):(document.body.setAttribute("data-load-state","loading"),window.addEventListener("load",(function(){document.body.setAttribute("data-load-state","complete")})))},borrowPointerPressure:function(){},borrowCounter:function(){},borrowRandom:function(){},utils:{throttle:function(o,e){let t=!1,r=null;function n(){null==r?t=!1:(o(...r),r=null,setTimeout(n,e))}return(...a)=>{t?r=a:(o(...a),t=!0,setTimeout(n,e))}},debounce:function(o,e){let t=null;return(...r)=>{window.clearTimeout(t),t=window.setTimeout((()=>{o.apply(null,r)}),e)}},runOnResize:function(o,e=!0){if("complete"===document.readyState){e&&o();const t=borrower.utils.debounce(o,200);window.addEventListener("resize",t)}else window.addEventListener("load",(function(){e&&o();const t=borrower.utils.debounce(o,200);window.addEventListener("resize",t)}))},runOnLoad:function(o){"complete"===document.readyState?o():window.addEventListener("load",(function(){o()}))},map:function(o,e,t,r,n,a){const l=(o-e)/(t-e)*(n-r)+r;return a?r<n?borrower.utils.constrain(l,r,n):borrower.utils.constrain(l,n,r):l},constrain:function(o,e,t){return Math.max(Math.min(o,t),e)}},globals:{mousePos:null,pressedKeys:null,toggledKeys:null,urlHash:null,language:null,network:null,deviceRotation:null,deviceAcceleration:null,scrollDepth:null}};window.addEventListener("load",(function(){borrower.checkWhatToBorrow()}));